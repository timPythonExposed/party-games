{% extends "base.html" %}
{% block title %}{{ app_name }} â€“ Muziekbingo â€“ Setup{% endblock %}
{% block content %}
<header class="page-header">
  <h1>Muziekbingo ðŸŽµ</h1>
  <p class="subtitle">EÃ©n gedeelde bingokaart â€“ claim de nummers in jouw kleur!</p>
</header>

<details class="rules-box">
  <summary class="rules-toggle">Spelregels</summary>
  <div class="rules-content">
    <p>Er is <strong>Ã©Ã©n gedeelde bingokaart</strong> met artiesten en nummers. Elk nummer wordt afgespeeld via een QR-code.</p>
    <p>De eerste die het nummer herkent, mag op het juiste vakje tikken en claimt het in zijn/haar kleur!</p>
    <p class="rules-tip">ðŸŽµ Wie de meeste vakjes claimt, wint!</p>
  </div>
</details>

{% if request.query_params.get('error') == 'no_selection' %}
<div class="alert">Selecteer minstens Ã©Ã©n muzieklijst!</div>
{% endif %}

<form method="post" action="/mbingo/start" class="settings-form">
  <h3>Muzieklijsten</h3>
  <div class="category-grid">
    <label class="category-card category-card--all">
      <input type="checkbox" name="categories" value="alle">
      <span class="card-name">Alles</span>
      <span class="card-count">{{ categories.values()|sum }} nummers</span>
    </label>
    {% for name, count in categories.items() %}
    <label class="category-card">
      <input type="checkbox" name="categories" value="{{ name }}">
      <span class="card-name">{{ category_meta[name].label }}</span>
      <span class="card-count">{{ count }} nummers</span>
    </label>
    {% endfor %}
  </div>

  <fieldset>
    <legend>Aantal spelers</legend>
    <div class="radio-group">
      {% for n in [2, 3, 4, 5, 6] %}
      <label class="radio-card">
        <input type="radio" name="num_players" value="{{ n }}" {% if n == 2 %}checked{% endif %}>
        <span>{{ n }}</span>
      </label>
      {% endfor %}
    </div>
  </fieldset>

  <fieldset>
    <legend>Spelersnamen</legend>
    <div class="gty-team-names" id="teamNamesContainer">
      <div class="gty-team-input"><input type="text" name="player_0" placeholder="Speler 1" class="text-input"></div>
      <div class="gty-team-input"><input type="text" name="player_1" placeholder="Speler 2" class="text-input"></div>
    </div>
  </fieldset>

  <fieldset>
    <legend>Kaartgrootte</legend>
    <div class="radio-group">
      <label class="radio-card">
        <input type="radio" name="card_size" value="3">
        <span>3Ã—3</span>
      </label>
      <label class="radio-card">
        <input type="radio" name="card_size" value="4" checked>
        <span>4Ã—4</span>
      </label>
      <label class="radio-card">
        <input type="radio" name="card_size" value="5">
        <span>5Ã—5</span>
      </label>
    </div>
  </fieldset>

  <button type="submit" class="btn btn-primary btn-lg">Start spel</button>
  <a href="/" class="btn btn-outline">Terug</a>
</form>
{% endblock %}
{% block scripts %}
<script>document.addEventListener('DOMContentLoaded', () => { initMbingoSetup(); });</script>
{% endblock %}
